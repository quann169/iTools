<style type="text/css">
.form-horizontal .control-label {
	text-align: left;
}

.payment-hide {
	display: none;
}

.form-group {
	min-height: 110px
}

label.checkbox input[type="checkbox"] {
	border: 0 none;
	clip: rect(0px, 0px, 0px, 0px);
	height: 1px;
	margin: -1px;
	overflow: hidden;
	padding: 0;
	position: absolute;
	width: 1px;
}

label.checkbox  input[type="checkbox"]+span>span.tick, 
label.checkbox  input[type="checkbox"]:checked+span>span.tick
	{
	transition: opacity 0.125s linear 0s;
}

label.checkbox input[type="checkbox"] + span > span.tick {
    background-color: transparent;
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAPCAMAAAGpX1+2AAAAqFBMVEXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUXTEUV+TxMFAAAAN3RSTlMABggKDg8REhMVFhgaHCAkJyorQEVJTlJTV19ja3F4t7q8v8HHy8/R09XX293h4+fq9fb3+fz+naLXIwAAAJBJREFUGNNtjldywgAUAxdsegkdQg1gSkJNYtj734wP8Bhm0JekJ2keAEUBsApgDqIGAPSBgdgWuIcAhn5BBbpaAuZq/XFq8owgIRezCVkBY4jdAhsnv+4AAvVwz4Sekl6eNxhdF8GL8XlRozA1erG6LgCUvp1C50/9KQOQmanXf3VfSz9dqh4/XnZzq3MrVTeq7xAMMFWDSQAAAABJRU5ErkJggg==");
    background-position: 3px 1px;
    background-repeat: no-repeat;
    background-size: 18px auto;
    display: block;
    height: 20px;
    left: -3px;
    opacity: 0;
    position: absolute;
    top: -3px;
    width: 20px;
    z-index: 100;
}

label.checkbox  input[type="checkbox"]:checked+span>span.tick {
	opacity: 1;
}

label.checkbox input[type="checkbox"]+span {
	background-color: #fff;
	border: 3px solid #dbdad4;
	cursor: pointer;
	display: inline-block;
	height: 20px;
	margin: -2px 10px 0 0;
	position: relative;
	vertical-align: middle;
	width: 20px;
}
</style>

<div class="title margin-top-l">
	<h2>
		<spring:message code="register.title" />
	</h2>
</div>

<c:if test="${param.registSuccess == 'true'}">
	<div style="color:red;margin:10px 0px;background-color: #f1f1f1;">	
		 <spring:message code="register.success" />       
	</div>
</c:if>

<div class="margin-top-l" style="background-color: #f1f1f1;">
	<section style="background-color: #f1f1f1;">
		<form:form action="${pageContext.request.contextPath}/public/register"
			modelAttribute="registerForm" class="form-horizontal ">

			<fieldset>
				<div class="col col-sm-6">
					<div class="form-group">
						<form:label path="fullName"
							class="col col-sm-12 control-label text-left">
							<spring:message code="register.fullname" />
						</form:label>
						<div class="col col-sm-12">
							<form:input path="fullName" class="form-control" />
							<form:errors path="fullName" cssClass="text-danger" />
						</div>
					</div>
					<div class="form-group">
						<form:label path="mobileNumber" class="col col-sm-12 control-label">
							<spring:message code="register.mobile" />
						</form:label>
						<div class="col col-sm-12">
							<form:input path="mobileNumber" class="form-control" />
							<form:errors path="mobileNumber" cssClass="text-danger" />
						</div>
					</div>
					<div class="form-group">
						<form:label path="referral" class="col col-sm-12 control-label">
							<spring:message code="register.referral" />
						</form:label>
						<div class="col col-sm-12">
							<form:input path="referral" class="form-control" />
							<form:errors path="referral" cssClass="text-danger" />
						</div>
					</div>
				</div>
				<div class="col col-sm-6">
					<div class="form-group">
						<form:label path="age" class="col col-sm-12 control-label">
							<spring:message code="register.age" />
						</form:label>
						<div class="col col-sm-12">
							<form:input path="age" class="form-control" />
							<form:errors path="age" cssClass="text-danger" />
						</div>
					</div>

					<div class="form-group">
						<form:label path="email" class="col col-sm-12 control-label">
							<spring:message code="register.email" />
						</form:label>
						<div class="col col-sm-12">
							<form:input path="email" class="form-control" />
							<form:errors path="email" cssClass="text-danger" />
						</div>
					</div>
				</div>

				<div class="col col-sm-12">
					<label class="checkbox">
						<input type="checkbox" id="agree" name="agree"/>
						<span class="indicator"><span class="tick"></span></span>					
						<span class="p3">						
							<spring:message code="register.term" />						
						</span>					
					</label>
<%-- 					<form:hidden path="isAgree"/> --%>
				</div>

				<div class="col col-sm-6 margin-top-l">
					<a href="#" onclick="validate()"
						class="btn btn-primary text-uppercase full-width"><spring:message
							code="register.registerbutton" /></a>
				</div>

			</fieldset>
		</form:form>
	</section>
	<div class="margin-top-l"></div>
</div>
<script type="text/javascript">
	function validate_email() {
		var email = $("#email").val()
		var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
		if (! re.test(email)) {		
			$("#email_errors").text("<spring:message code="registerForm.email_errors"/>");
			return false;
		} else {
			$("#email_errors").text("");
			return true;
		}		
	}
	
	function validate_phone() {
		var phone = $("#mobileNumber").val();
		var phoneno10 = /^\d{10}$/; 
		var phoneno11 = /^\d{11}$/;
		
		var referral = $("#referral").val();
		if(phone.match(phoneno10) || phone.match(phoneno11) || referral.length > 0)  {		
			$("#mobileNumber_errors").text("");
			$("#referral_errors").text("");
			return true;
		} else {			
			$("#mobileNumber_errors").text("<spring:message code="registerForm.mobileNumber_errors"/>");
			$("#referral_errors").text("<spring:message code="registerForm.referral_errors"/>");
			return false;
		}
		
	}
	
	function validate_age(age) {
		var age = $("#age").val();
		if (!(age > 0 && age < 99)) {		
			$("#age_errors").text("<spring:message code="registerForm.age_errors"/>");
				return false;
		} else {
			$("#age_errors").text("");
			return true;
		}
		
	}
	
	function validate_fullname() {
		var fullname = $("#fullName").val();		
		if (fullname.length === 0 ) {				
			$("#fullName_errors").text("<spring:message code="registerForm.fullName_errors"/>");
			return false;
		} else {			
			$("#fullName_errors").text("");
			return true;
		}
		
	}
	
	function validateAll() {
		var email = $("#email").val();
		var age = $("#age").val();
		var phone = $("#mobileNumber").val();
		var referral = $("#referral").val();
		var fullname = $("#fullName").val();	
		var phoneno10 = /^\d{10}$/; 
		var phoneno11 = /^\d{11}$/;
		var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
		var chkFlag = true;
		if (! re.test(email)) {		
			$("#email_errors").text("<spring:message code="registerForm.email_errors"/>");
			chkFlag = false;
		} 
		
		if(!(phone.match(phoneno10) || phone.match(phoneno11) || referral.length > 0)){			
			$("#mobileNumber_errors").text("<spring:message code="registerForm.mobileNumber_errors"/>");
			$("#referral_errors").text("<spring:message code="registerForm.referral_errors"/>");
			chkFlag = false;
		} 
		
		if (!(age > 0 && age < 99)) {		
			$("#age_errors").text("<spring:message code="registerForm.age_errors"/>");			
			chkFlag = false;
		} 
		
		if (fullname.length === 0 ) {				
			$("#fullName_errors").text("<spring:message code="registerForm.fullName_errors"/>");
			chkFlag = false;		
		} 
		
		if(chkFlag) {			
			$("#email_errors").text("");
			$("#mobileNumber_errors").text("");
			$("#referral_errors").text("");
			$("#age_errors").text("");
			$("#fullName_errors").text("");
			return true;
		} else {
			return false;
		}
	}
	
	function validate() {
		var checkboxCheck = $("input[name='agree']").is(':checked');
		if (checkboxCheck && validateAll()) {
			document.forms[0].submit();
		} else {
			alert("<spring:message code="register.cannotSubmit"/>");			
		}
	}

	$(function() {
		$("#email").parent().append($('<span id="email_errors" class="text-danger"></span>'));
		$("#mobileNumber").parent().append($('<span id="mobileNumber_errors" class="text-danger"></span>'));
		$("#age").parent().append($('<span id="age_errors" class="text-danger"></span>'));
		$("#fullName").parent().append($('<span id="fullName_errors" class="text-danger"></span>'));
		$("#referral").parent().append($('<span id="referral_errors" class="text-danger"></span>'));
				
		$("#email").blur(function() {			
			validate_email();			
		});		
		
		$("#mobileNumber").blur(function() {			
			validate_phone();			
		});	
		
		$("#referral").blur(function() {			
			validate_phone();			
		});	
		
		$("#age").blur(function() {			
			validate_age();
		});	
		
		$("#fullName").blur(function() {			
			validate_fullname();
		});	
		
	});
</script>